{
  "version": "1.0.0",
  "title": "k6 Quick Stress Test",
  "description": "Run k6 stress testing with shorter duration for development",
  "tags": ["stress-test", "k6", "quick"],
  "steady-state-hypothesis": {
    "title": "System degrades gracefully under stress",
    "probes": []
  },
  "method": [
    {
      "type": "action",
      "name": "run-k6-quick-stress-test",
      "provider": {
        "type": "python",
        "module": "chaosmonkey.stubs.actions",
        "func": "run_k6_script",
        "arguments": {
          "script_text": "import http from 'k6/http';\nimport { check } from 'k6';\n\nexport let options = {\n  stages: [\n    { duration: '30s', target: 10 },\n    { duration: '1m', target: 50 },\n    { duration: '30s', target: 0 },\n  ],\n};\n\nexport default function() {\n  let response = http.get('${target_url}');\n  check(response, {\n    'status is not 5xx': (r) => r.status < 500,\n  });\n}",
          "options": {
            "thresholds": {
              "http_req_failed": ["rate<0.5"],
              "http_req_duration": ["p(95)<2000"]
            }
          }
        }
      }
    }
  ],
  "rollbacks": []
}